{% extends "layout/nav_bar.html" %}
{% load static %}
{% block title %}Accueil - WorldCast{% endblock %}
{% block head %}
  <link rel="stylesheet" href="{% static 'css/index.css' %}">
  <script src="{% static 'js/meteo.js' %} "defer ></script>
{% endblock %}
{% block content %}

<div class="centent mt-3">
  <div>
     <p class=" text-lg  font-bold pb-2">{{ message }}</p>
    <div class="carte">
      {{ carte|safe }}
    </div>
  </div>
  <div class="mt-[50px] ">
     <div
    class="bg-[#409ac7] text-white rounded-2xl shadow-lg flex justify-between  w-[100%]  p-3 ">

    <!-- Bloc gauche (ville + météo actuelle) -->
    <div class=" items-center space-x-4 px-6">
      <img src="{% static 'img/imgmeteo/cloud.png' %}" alt="temp"
        class="w-24 h-24 items-center px-2">

      <div class="flex space-between gap-6">
        <div>
          <p>Partly Cloudy</p>
          <h2 class="text-2xl font-semibold">Cotonou, BJ</h2>

        </div>
        <h1 class="text-5xl font-bold mt-2">28°</h1>
      </div>
    </div>

    <!-- Bloc droite (prévisions) -->
    <div id="weather-scroll" class="overflow-hidden w-[500px] relative">
      <div id="weather-cards" class="flex space-x-4 absolute">
        <!-- Jour 1 -->
        <div
          class="bg-white text-gray-800 rounded-xl p-4 min-w-[150px] flex flex-col items-center shadow">
          <p class="text-lg font-bold">12°</p>
          <img src="{% static 'img/imgmeteo/wind.png' %}" alt="Sun"
            class="w-10 h-10">
          <p class="text-sm font-semibold mt-2">Tuesday</p>
          <p class="text-xs text-gray-500">Sun</p>
        </div>

        <!-- Jour 2 -->
        <div
          class="bg-white text-gray-800 rounded-xl p-4 min-w-[150px] flex flex-col items-center shadow">
          <p class="text-lg font-bold">14°</p>
          <img src="{% static 'img/imgmeteo/cloudly.png' %}" alt="Cloudy"
            class="w-10 h-10">
          <p class="text-sm font-semibold mt-2">Wednesday</p>
          <p class="text-xs text-gray-500">Wind</p>
        </div>

        <!-- Jour 3 -->
        <div
          class="bg-white text-gray-800 rounded-xl p-4 min-w-[150px] flex flex-col items-center shadow">
          <p class="text-lg font-bold">18°</p>
          <img src="{% static 'img/imgmeteo/rainy.png' %}" alt="Rain"
            class="w-10 h-10">
          <p class="text-sm font-semibold mt-2">Thursday</p>
          <p class="text-xs text-gray-500">Rainy</p>
        </div>

        <!-- Jour 4 -->
        <div
          class="bg-white text-gray-800 rounded-xl p-4 min-w-[150px] flex flex-col items-center shadow">
          <p class="text-lg font-bold">20°</p>
          <img src="{% static 'img/imgmeteo/sun.png' %}" alt="Sun"
            class="w-10 h-10">
          <p class="text-sm font-semibold mt-2">Friday</p>
        </div>

        <!-- Jour 4 -->
        <div
          class="bg-white text-gray-800 rounded-xl p-4 min-w-[150px] flex flex-col items-center shadow">
          <p class="text-lg font-bold">20°</p>
          <img src="{% static 'img/imgmeteo/sun.png' %}" alt="Sun"
            class="w-10 h-10">
          <p class="text-sm font-semibold mt-2">Saturday</p>
        </div>

        <!-- Dupliquer pour le défilement infini -->
        <div
          class="bg-white text-gray-800 rounded-xl p-4 min-w-[150px] flex flex-col items-center shadow">
          <p class="text-lg font-bold">12°</p>
          <img src="{% static 'img/imgmeteo/wind.png' %}" alt="Sun"
            class="w-10 h-10">
          <p class="text-sm font-semibold mt-2">Sunday</p>
          <p class="text-xs text-gray-500">Sun</p>
        </div>
        <!-- … et ainsi de suite pour chaque carte dupliquée -->
      </div>

    </div>
  </div>
  </div>
 

<!-- CONTENEUR DASHBOARD EN DESSOUS -->


<!-- Ajouter Chart.js depuis CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('weatherChart').getContext('2d');
  const weatherChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'],
      datasets: [
        {
          label: 'Température (°C)',
          data: [28, 27, 29, 30, 28, 26, 27],
          borderColor: 'rgb(239, 68, 68)',
          backgroundColor: 'rgba(239, 68, 68, 0.2)',
          tension: 0.4
        },
        {
          label: 'Humidité (%)',
          data: [65, 60, 70, 75, 68, 62, 64],
          borderColor: 'rgb(59, 130, 246)',
          backgroundColor: 'rgba(59, 130, 246, 0.2)',
          tension: 0.4
        },
        {
          label: 'Vent (km/h)',
          data: [12, 10, 14, 13, 12, 11, 10],
          borderColor: 'rgb(34, 197, 94)',
          backgroundColor: 'rgba(34, 197, 94, 0.2)',
          tension: 0.4
        },
        {
          label: 'Précipitations (mm)',
          data: [5, 0, 10, 0, 2, 0, 1],
          borderColor: 'rgb(79, 70, 229)',
          backgroundColor: 'rgba(79, 70, 229, 0.2)',
          tension: 0.4
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'top' },
        title: {
          display: true,
          text: 'Évolution météo sur une semaine'
        }
      },
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
</script>

  <style>
#weather-scroll {
  cursor: grab; /* Indique que c’est draggable */
}
#weather-cards {
  white-space: nowrap;
  will-change: transform;
}
#weather-cards.dragging {
  cursor: grabbing;
}
</style>

  {% endblock %}