{% extends "layout/nav_bar.html" %}
{% load static %}
{% block title %}Accueil - WorldCast{% endblock %}
{% block head %}
  <link rel="stylesheet" href="{% static 'css/index.css' %}">
  <script src="{% static 'js/meteo.js' %} "defer ></script>
{% endblock %}
{% block content %}

<div class="carte">
  {{ carte|safe }}
</div>
<p class="text-center text-lg mt-4">{{ message }}</p>

  <!-- COURBE D'EVOLUTION SUR UNE SEMAINE -->
  <div class="bg-white p-4 rounded-xl shadow">
    <canvas id="weatherChart" class="w-full h-64"></canvas>
  </div>

</div>

<!-- Ajouter Chart.js depuis CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ctx = document.getElementById('weatherChart').getContext('2d');
  const weatherChart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'],
      datasets: [
        {
          label: 'Température (°C)',
          data: [28, 27, 29, 30, 28, 26, 27],
          borderColor: 'rgb(239, 68, 68)',
          backgroundColor: 'rgba(239, 68, 68, 0.2)',
          tension: 0.4
        },
        {
          label: 'Humidité (%)',
          data: [65, 60, 70, 75, 68, 62, 64],
          borderColor: 'rgb(59, 130, 246)',
          backgroundColor: 'rgba(59, 130, 246, 0.2)',
          tension: 0.4
        },
        {
          label: 'Vent (km/h)',
          data: [12, 10, 14, 13, 12, 11, 10],
          borderColor: 'rgb(34, 197, 94)',
          backgroundColor: 'rgba(34, 197, 94, 0.2)',
          tension: 0.4
        },
        {
          label: 'Précipitations (mm)',
          data: [5, 0, 10, 0, 2, 0, 1],
          borderColor: 'rgb(79, 70, 229)',
          backgroundColor: 'rgba(79, 70, 229, 0.2)',
          tension: 0.4
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { position: 'top' },
        title: {
          display: true,
          text: 'Évolution météo sur une semaine'
        }
      },
      scales: {
        y: { beginAtZero: true }
      }
    }
  });
</script>

  <style>
#weather-scroll {
  cursor: grab; /* Indique que c’est draggable */
}
#weather-cards {
  white-space: nowrap;
  will-change: transform;
}
#weather-cards.dragging {
  cursor: grabbing;
}
</style>

  {% endblock %}